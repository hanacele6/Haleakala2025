# データ前処理 (`2025ver/`)

このフォルダには、ハワイの望遠鏡で観測された生データ（Raw Data）を、研究で使用可能な形式に整形（前処理）するためのスクリプト群が格納されています。

---

## 概要

主な目的は、観測された生データ（`.fits` ファイル）から不要なノイズを除去し、物理量に変換し、後続の `Model/` フォルダでのシミュレーションや分析に使用できる形式に変換することです。

---

## 処理フロー (使い方)

基本的な処理の流れは以下の通りです。

1.  `mkMcParams.py`を実行し、水星の観測データの日時などからその時間での水星の位置、速度、角度などを計算します。
2.  `mkNHpSpec.py`を実行し、ノイズを除去します。
3.  `mkDTraceMap4.py`を実行し、`.fits`からファイバーの位置を取得します。
4.  `mkTraceSpec2.py`を実行し、ファイバーごとのスペクトルを抽出します。
5.  `mkMasterFlat.py`を実行し、校正用データを作成します。
6.  `mkWavMap3.py`を実行し、太陽光スペクトルを用いて波長校正に必要な2dマップを作成。
7.  `mkWCalSpec2.py`を実行し、2dマップから波長校正、感度校正を行う。
8.  `mkTotFib.py`を実行し、信号を積分。
9.  `mkSubSurf.py`を実行し、水星のスペクトルから地球大気散乱光、水星表面の反射光を減算。
10.  `mkNaAtom2.py`を実行し、その日の水星大気のNa原子数を計算。

---

## TODO

これまでは頻繁に修正を行っていたが、安定してきたのでスクリプティングを行いたい。
ただ、水星のデータによってはかなりノイズの多いものもあるため、全く同じ設定で処理を完了できることは稀。
